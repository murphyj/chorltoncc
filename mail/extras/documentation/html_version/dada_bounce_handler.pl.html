<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bounce Handler</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:_postfix@neige.apple.com" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">Name</a></li>
	<li><a href="#user_guide">User Guide</a></li>
	<li><a href="#description">Description</a></li>
	<li><a href="#obtaining_a_copy_of_the_plugin">Obtaining a Copy of the Plugin</a></li>
	<li><a href="#requirements">Requirements</a></li>
	<li><a href="#recommended">Recommended</a></li>
	<li><a href="#installation">Installation</a></li>
	<li><a href="#lightning_configuration_installation_instructions">Lightning Configuration/Installation Instructions</a></li>
	<li><a href="#screencasts">Screencasts</a></li>
	<ul>

		<li><a href="#part_1">Part 1</a></li>
		<li><a href="#part_2">Part 2</a></li>
	</ul>

	<li><a href="#configuration">Configuration</a></li>
	<ul>

		<ul>

			<li><a href="#pop3_server_information_">POP3 Server Information.</a></li>
		</ul>

		<li><a href="#set_this_address_as_the_default_list_administration_email_address">Set this address as the default List Administration Email Address</a></li>
		<li><a href="#list_control_panel_menu">List Control Panel Menu</a></li>
		<li><a href="#telling_dada_mail_to_use_bounce_handler_">Telling Dada Mail to use Bounce Handler.</a></li>
		<ul>

			<li><a href="#if_you_re_using_th_sendmail_command_">If you're using th sendmail command:</a></li>
			<li><a href="#if_you_re_using_smtp_sending_">If you're using SMTP sending:</a></li>
			<li><a href="#if_you_re_using_amazon_ses_">If you're using Amazon SES:</a></li>
		</ul>

		<li><a href="#testing">Testing</a></li>
	</ul>

	<li><a href="#configuring_the_cronjob_to_automatically_run_bounce_handler">Configuring the Cronjob to Automatically Run Bounce Handler</a></li>
	<ul>

		<li><a href="#setting_the_cronjob_via_curl">Setting the cronjob via curl</a></li>
		<ul>

			<li><a href="#customizing_your_cronjob_with_added_paramaters">Customizing your cronjob with added paramaters</a></li>
			<ul>

				<li><a href="#passcode">passcode</a></li>
			</ul>

			<li><a href="#messages">messages</a></li>
			<li><a href="#verbose">verbose</a></li>
			<li><a href="#test">test</a></li>
		</ul>

	</ul>

	<li><a href="#command_line_interface">Command Line Interface</a></li>
	<ul>

		<li><a href="#command_line_interface_for_cronjobs_">Command Line Interface for Cronjobs:</a></li>
	</ul>

	<li><a href="#plugin_configs">Plugin Configs</a></li>
	<ul>

		<li><a href="#server__username__password">Server, Username, Password</a></li>
		<li><a href="#port">Port</a></li>
		<li><a href="#usessl">USESSL</a></li>
		<li><a href="#auth_mode">AUTH_MODE</a></li>
		<li><a href="#plugin_name">Plugin_Name</a></li>
		<li><a href="#plugin_url">Plugin_URL</a></li>
		<li><a href="#allow_manual_run">Allow_Manual_Run</a></li>
		<li><a href="#manual_run_passcode">Manual_Run_Passcode</a></li>
		<li><a href="#enable_pop3_file_locking">Enable_POP3_File_Locking</a></li>
		<li><a href="#log">Log</a></li>
		<li><a href="#messagesatonce">MessagesAtOnce</a></li>
		<ul>

			<li><a href="#max_size_of_any_message">Max_Size_Of_Any_Message</a></li>
		</ul>

	</ul>

	<li><a href="#more_on_scores__thresholds__etc">More on Scores, Thresholds, etc</a></li>
	<li><a href="#faqs">FAQs</a></li>
	<ul>

		<li><a href="#bounce_email_address">Bounce Email Address</a></li>
		<ul>

			<li><a href="#do_you_use_only_one_bounce_email_address_for_all_the_mailing_lists">Do you use only one Bounce Email Address  for all the mailing lists?</a></li>
		</ul>

	</ul>

	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h1><a name="name">Name</a></h1>
<p>Bounce Handler For Dada Mail</p>
<p>
</p>
<hr />
<h1><a name="user_guide">User Guide</a></h1>
<p>The below documentation go into detail on how to install and configure Bounce Handler. A user guide for Bounce Handler is
 available in the Dada Mail Manual chapter, <strong>Using the Dada Bounce Handler</strong>:</p>
<p><a href="http://dadamailproject.com/pro_dada/using_dada_bounce_handler.html">http://dadamailproject.com/pro_dada/using_dada_bounce_handler.html</a></p>
<p>
</p>
<hr />
<h1><a name="description">Description</a></h1>
<p>Bounce Handler intelligently handles bounces from Dada Mail list messages.</p>
<p>Messages sent to subscribers of your mailing list that bounce back will be directed to the <strong>List Administrator Address</strong>. This email account is then checked periodically by Bounce Handler.</p>
<p>Bounce Handler then reads awaiting messages and <strong>parses</strong> the messages in an attempt to understand why the message has bounced.</p>
<p>The <strong>parsed</strong> message will then be <strong>examined</strong> and an <strong>action</strong> will be taken.</p>
<p>The usual action that is taken is to apply a <strong>score</strong> to the email address that has bounced the message. Once the <strong>Score Threshold</strong> is reached, the email address is unsubscribed from the mailing list.</p>
<p>
</p>
<hr />
<h1><a name="obtaining_a_copy_of_the_plugin">Obtaining a Copy of the Plugin</a></h1>
<p>Bounce Handler is located in the, <em>dada/plugins</em> directory of the main Dada Mail distribution, under the name, <strong>dada_bounce_handler.pl</strong></p>
<p>
</p>
<hr />
<h1><a name="requirements">Requirements</a></h1>
<p>Please make sure you have these requirements before installing this plugin:</p>
<ul>
<li><strong><a name="a_pop3_email_account" class="item">A POP3 Email Account</a></strong>

<p>Bounce Handler works by checking a email address via POP3. (IMAP is currently not supported).</p>
<p>You will need to create a new email address account for Bounce Handler to utilize.</p>
<p>Example: create <strong><a href="mailto:bounces@yourdomain.com">bounces@yourdomain.com</a></strong>, where, <em>yourdomain.com</em> is the name of the domain Dada Mail is installed on.</p>
<p>Guidelines on this address:</p>
<ul>
<li><strong><a name="do_not_use_this_address_for_anything_except_bounce_handler" class="item">Do NOT use this address for anything except Bounce Handler</a></strong>

<p>No one will be checking this POP3 account via a mail reader.</p>
<p>Doing so won't break Dada Mail, but it will stop Bounce Handler from working correctly, if when checking messages, your mail reader then removes those messages from the POP3 account.  If you do need to periodically check this inbox, make sure to have your mail reader set to <strong>not</strong> automatically remove the messages.</p>
</li>
<li><strong><a name="the_email_address_must_belong_to_the_domain_you_have_dada_mail_installed" class="item">The email address MUST belong to the domain you have Dada Mail installed</a></strong>

<p>Meaning, if your domain is, &quot;yourdomain.com&quot;, the bounce email address should be something like, <a href="mailto:"bounces@yourdomain.com".">"bounces@yourdomain.com".</a> In other words, do not use a Yahoo! Gmail, or Hotmail account for your bounce address. This will most likely disrupt all regular mail sending in Dada Mail.</p>
</li>
<li><strong><a name="bounce_handler_must_be_able_to_check_the_pop3_account" class="item">Bounce Handler MUST be able to check the POP3 account</a></strong>

<p>Check to make sure that the POP3 server (usually, port 110) is not blocked from requests coming from your hosting account server.</p>
</li>
</ul>
</ul>
<p>
</p>
<hr />
<h1><a name="recommended">Recommended</a></h1>
<p>These points are not required, but recommended to use Bounce Handler:</p>
<ul>
<li><strong><a name="ability_to_set_cron_jobs" class="item">Ability to set Cron Jobs.</a></strong>

<p>Bounce Handler can be configured to run automatically by using a cronjob.</p>
<p>If you do not know how to set up a cronjob, attempting to set one up for Dada Mail will result in much aggravation. Please read up on the topic before attempting!</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="installation">Installation</a></h1>
<p>This plugin can be installed during a Dada Mail install/upgrade, using the included installer that comes with Dada Mail. The below installation instructions go through how to install the plugin manually.</p>
<p>If you do install this way, note that you still have to create the create the bounce handler email account as well set the cronjob. Both are covered below.</p>
<p>
</p>
<hr />
<h1><a name="lightning_configuration_installation_instructions">Lightning Configuration/Installation Instructions</a></h1>
<ul>
<li><strong><a name="create_the_bounce_handler_email_account" class="item">Create the bounce handler email account</a></strong>

<li><strong><a name="configure_your_mailing_list_to_use_this_email_address_for_its_list_administrator_address" class="item">Configure your mailing list to use this email address for its, &quot;List Administrator Address&quot;</a></strong>

<p>Set this email address as our &quot;List Administrator Adress&quot; in the list control panel, under,</p>
<p><strong>Your Mailing List -  Change List Information</strong></p>
</li>
<li><strong><a name="configure_the_plugin_in_your_dada_config_file" class="item">Configure the plugin in your .dada_config file</a></strong>

<p>How to do this exactly is covered, below</p>
</li>
<li><strong><a name="chmod_755_the_dada_bounce_handler_pl_script" class="item">chmod 755 the dada_bounce_handler.pl script</a></strong>

<li><strong><a name="run_the_plugin_via_a_web_browser" class="item">run the plugin via a web browser.</a></strong>

<li><strong><a name="cronjob" class="item">Set the cronjob (optional)</a></strong>

</ul>
<p>
</p>
<hr />
<h1><a name="screencasts">Screencasts</a></h1>
<p>
</p>
<h2><a name="part_1">Part 1</a></h2>
<object width="640" height="510"><param name="movie" value="http://www.youtube.com/v/tvdIj1s19Vo?fs=1&amp;hl=en_US&amp;rel=0&amp;hd=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/tvdIj1s19Vo?fs=1&amp;hl=en_US&amp;rel=0&amp;hd=1" type="application/x-shockwave-flash" width="640" height="510" allowscriptaccess="always" allowfullscreen="true"></embed></object><p>
</p>
<h2><a name="part_2">Part 2</a></h2>
<object width="640" height="510"><param name="movie" value="http://www.youtube.com/v/CnsM994xa7A?fs=1&amp;hl=en_US&amp;rel=0&amp;hd=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/CnsM994xa7A?fs=1&amp;hl=en_US&amp;rel=0&amp;hd=1" type="application/x-shockwave-flash" width="640" height="510" allowscriptaccess="always" allowfullscreen="true"></embed></object><p>Below is the detailed version of the above:</p>
<p>
</p>
<hr />
<h1><a name="configuration">Configuration</a></h1>
<p>There's a few things you need to configure for this plugin. Configure the plugin variables in your <code>.dada_config</code> file (not in the plugin itself!)</p>
<p>
</p>
<h3><a name="pop3_server_information_">POP3 Server Information.</a></h3>
<p>Create a new POP3 email account. This email account will be the address that
bounced messages will be delivered to.</p>
<p>Open up your <code>.dada_config</code> file for editing.</p>
<p>Search and see if the following lines are present:</p>
<pre>
 # start cut for plugin configs
 =cut</pre>
<pre>
 =cut
 # end cut for plugin configs</pre>
<p>If they are present, remove them.</p>
<p>You can then configure the plugin variables on these lines:</p>
<pre>
        Bounce_Handler =&gt; {</pre>
<pre>
            Server                                      =&gt; undef, 
            Username                                    =&gt; undef, 
            Password                                    =&gt; undef, 
            # etc.
        },
        
For example:</pre>
<p>Bounce_Handler =&gt; {</p>
<pre>
                Server                                          =&gt; 'mail.yourdomain.com', 
                Username                                        =&gt; 'bounces+yourdomain.com', 
                Password                                        =&gt; 'password', 
            # etc.
},</pre>
<p>
</p>
<h2><a name="set_this_address_as_the_default_list_administration_email_address">Set this address as the default List Administration Email Address</a></h2>
<p>You may also want to set a default value for the, List Adminstration Email, so that all new lists already have Bounce Handler enabled.</p>
<p>Find this chunk of lines in your <code>.dada_config</code> file:</p>
<pre>
        # start cut for list settings defaults
        =cut
        
        %LIST_SETUP_INCLUDE = (
                set_smtp_sender              =&gt; 1, # For SMTP   
                add_sendmail_f_flag          =&gt; 1, # For Sendmail Command
                admin_email                  =&gt; 'bounces@example.com',
        );
        
        =cut
        # end cut for list settings defaults</pre>
<p>Remove the =cut lines, similar to before:</p>
<pre>
        # start cut for list settings defaults
        =cut</pre>
<pre>
        =cut
        # end cut for list settings defaults</pre>
<p>And then change the, <code>admin_email</code> to your bounce handler email address:</p>
<pre>
        %LIST_SETUP_INCLUDE = (
                set_smtp_sender              =&gt; 1, # For SMTP   
                add_sendmail_f_flag          =&gt; 1, # For Sendmail Command
                admin_email                  =&gt; 'bounces@yourdomain.com',
        );</pre>
<p>
</p>
<h2><a name="list_control_panel_menu">List Control Panel Menu</a></h2>
<p>Now, edit your <code>.dada_config</code> file, so that it shows Bounce Handler in the left-hand menu, under the, <strong>Plugins</strong> heading:</p>
<p>First, see if the following lines are present in your <code>.dada_config</code> file:</p>
<pre>
 # start cut for list control panel menu
 =cut</pre>
<pre>
 =cut
 # end cut for list control panel menu</pre>
<p>If they are, remove them.</p>
<p>Then, find these lines:</p>
<pre>
 #                                      {-Title      =&gt; 'Bounce Handler',
 #                                       -Title_URL  =&gt; $PLUGIN_URL.&quot;/dada_bounce_handler.pl&quot;,
 #                                       -Function   =&gt; 'dada_bounce_handler',
 #                                       -Activated  =&gt; 1,
 #                                      },</pre>
<p>Uncomment the lines, by taking off the, &quot;#&quot;'s:</p>
<pre>
                                        {-Title      =&gt; 'Bounce Handler',
                                         -Title_URL  =&gt; $PLUGIN_URL.&quot;/dada_bounce_handler.pl&quot;,
                                         -Function   =&gt; 'dada_bounce_handler',
                                         -Activated  =&gt; 1,
                                        },</pre>
<p>Save your <code>.dada_config</code> file.</p>
<p>
</p>
<h2><a name="telling_dada_mail_to_use_bounce_handler_">Telling Dada Mail to use Bounce Handler.</a></h2>
<p>You're going to have to tell Dada Mail explicitly that you want
bounces to go to the bounce handler. The first step is to set the 
<strong>Dada List Administrator</strong> to your bounce email address. You'll set this per mailing list in the each mailing list's control panel, under</p>
<p><strong>Your Mailing List -  Change List Information</strong></p>
<p>After that, you'll need to configure outgoing email messages to set the <strong>Dada List Administrator</strong> address in the <code>Return-Path</code> header. Sounds scary, but it's easy enough.</p>
<p>
</p>
<h3><a name="if_you_re_using_th_sendmail_command_">If you're using th sendmail command:</a></h3>
<p>In the list control panel, go to <strong>Mail Sending - Sending Preferences</strong> and 
check: <strong>Add the Sendmail '-f' flag when sending messages ...</strong></p>
<p>This <em>should</em> set the sending to the admin email, and in turn, set the
<strong>Return-Path</strong> header. Dada Mail is shipped to have this option set by default.</p>
<p>
</p>
<h3><a name="if_you_re_using_smtp_sending_">If you're using SMTP sending:</a></h3>
<p>In the list control panel, go to: <strong>Sending Preferences - Sending Preferences</strong>
and check the box labeled: <strong>Set the Sender of SMTP mailings to the 
list administration email address</strong>  Dada Mail is shipped to have this option set by default.</p>
<p>
</p>
<h3><a name="if_you_re_using_amazon_ses_">If you're using Amazon SES:</a></h3>
<p>Dada Mail will automatically have bounces go to the List Administration Address when using Amazon SES. Make sure before you configure any of the above that you Verify this email address, just like you would a Amazon SES Sender. If you do not, your messages sent through Dada Mail will not be delivered.</p>
<p>
</p>
<h2><a name="testing">Testing</a></h2>
<p>To test out any of these configurations, Send yourself a test message through Dada Mail
and view the source of the message itself, in your mail reader. In the
mail headers, you should see the <strong>Return-Path</strong> header:</p>
<pre>
 Return-Path: &lt;dadabounce@myhost.com&gt;
 Delivered-To: justin@myhost.com
 Received: (qmail 75721 invoked from network); 12 May 2003 04:50:01 -0000
 Received: from myhost.com (208.10.44.140)
   by hedwig.myhost.com with SMTP; 12 May 2003 04:50:01 -0000
 Date:Sun, 11 May 2003 23:50:01 -0500
 From:justin &lt;justin@myhost.com&gt;
 Subject:Test, Test, Test
 To:justin@myhost.com
 Sender:dadabounce@myhost.com
 Reply-To:justin &lt;justin@myhost.com&gt;
 Precedence:list
 Content-type:text/plain; charset=iso-8859-1</pre>
<p>The first line has the <strong>Return-Path</strong> header should have the Bounce Handler Email set:</p>
<pre>
        Return-Path: &lt;dadabounce@myhost.com&gt;</pre>
<p>In this example, my List Owner address, <strong><a href="mailto:justin@myhost.com">justin@myhost.com</a></strong> still occupies the <code>To:</code> and <code>Reply-To headers</code>, so whoever replies to my message will reply to me, <em>not</em> Bounce Handler.</p>
<p>
</p>
<hr />
<h1><a name="configuring_the_cronjob_to_automatically_run_bounce_handler">Configuring the Cronjob to Automatically Run Bounce Handler</a></h1>
<p>We're going to assume that you already know how to set up the actual cronjob, 
but we'll be explaining in depth on what the cronjob you need to set <strong>is</strong>.</p>
<p>
</p>
<h2><a name="setting_the_cronjob_via_curl">Setting the cronjob via curl</a></h2>
<p>Generally, setting the cronjob to have Bounce Handler run automatically, just 
means that you have to have a cronjob access a specific URL (via a utility, like curl). The URL looks something like this:</p>
<pre>
 <a href="http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;verbose=1">http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;verbose=1</a></pre>
<p>Where, <a href="http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl">http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl</a> is the URL to your copy of <code>dada_bounce_handler.pl</code></p>
<p>You'll see the specific URL used for your installation of Dada Mail in the web-based control panel for Bounce Handler, under the fieldset legend, <strong>Manually Run Bounce Handler</strong>, under the heading, <strong>Manual Run URL:</strong></p>
<p>This will have Bounce Handler check any awaiting messages.</p>
<p>A <em>Pretty Good Guess</em> of what the entire cronjob should be set to is located 
in the web-based crontrol panel for Bounce Handler, under the fieldset legend, <strong>Manually Run Bounce Handler</strong>, under the heading, <strong>curl command example (for a cronjob):</strong></p>
<p>
</p>
<h3><a name="customizing_your_cronjob_with_added_paramaters">Customizing your cronjob with added paramaters</a></h3>
<p>
</p>
<h4><a name="passcode">passcode</a></h4>
<p>Since anyone (or anything) can run your Bounce Handler, by following that same URL, (<code>http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;verbose=1</code>), you can set up a simple <strong>Passcode</strong>, to have some semblence of security over who runs the program.</p>
<p>Set a <strong>passcode</strong> in Bounce Handler's Config variable, <strong>Manual_Run_Passcode</strong>. This is done in your <code>.dada_config</code> file - the same place the <strong>mail server</strong>, <strong>username</strong> and <strong>password</strong> were set. Find the lines in your <code>.dada_config</code> file that look like this:</p>
<pre>
        $PLUGIN_CONFIGS = { 
        
                Bounce_Handler =&gt; {
                        Server                      =&gt; 'mail.yourdomain.com', 
                        Username                    =&gt; 'bounces+yourdomain.com', 
                        Password                    =&gt; 'password', 
                        Port                        =&gt; undef,
                        USESSL                      =&gt; undef,
                        AUTH_MODE                   =&gt; undef,
                        Plugin_Name                 =&gt; undef,
                        Plugin_URL                  =&gt; undef,
                        Allow_Manual_Run            =&gt; undef,
                        Manual_Run_Passcode         =&gt; undef,
                        Enable_POP3_File_Locking    =&gt; undef, 
                        Log                         =&gt; undef,
                        MessagesAtOnce              =&gt; undef,
                        Max_Size_Of_Any_Message     =&gt; undef,
                        Rules                       =&gt; undef,
                        
                },</pre>
<p>Find the config paramater named, <strong>Manual_Run_Passcode</strong> and set it to whatever you'd like this Passcode to be:</p>
<pre>
                Manual_Run_Passcode         =&gt; 'sneaky',</pre>
<p>Then change the URL to include this passcode. In our examples, it would then look like this:</p>
<pre>
 <a href="http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;passcode=sneaky">http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;passcode=sneaky</a></pre>
<p>The example cronjob for curl in Bounce Handler's list control panel should also update use the new passcode.</p>
<p>
</p>
<h3><a name="messages">messages</a></h3>
<p>Sets how many messages should be checked and parsed in one execution of the program. Example:</p>
<pre>
 <a href="http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;messages=10">http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl?run=1&amp;messages=10</a></pre>
<p>
</p>
<h3><a name="verbose">verbose</a></h3>
<p>When set to, <strong>1</strong>, you'll receive the a report of how Bounce Handler is doing parsing and adding scores (and what not). This is sometimes not so desired, especially in a cron environment, since all this informaiton will be emailed to you (or someone) everytime the script is run.</p>
<p>If you set <strong>verbose</strong> to, &quot;0&quot;, under normal operation, Bounce Handler won't show any output, but if there's a server error, you'll receive an email about it. This is probably a good thing. Example (for cronjob-run curl command):</p>
<pre>
 * * * * * /usr/local/bin/curl -s --get --data run=1\;verbose=0 --url <a href="http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl">http://example.com/cgi-bin/dada/plugins/dada_bounce_handler.pl</a></pre>
<p>
</p>
<h3><a name="test">test</a></h3>
<p>Runs Bounce Handler in test mode by checking the bounces and parsing them, but not actually carrying out any rules (no scores added, no email addresses unsubscribed).</p>
<p>
</p>
<hr />
<h1><a name="command_line_interface">Command Line Interface</a></h1>
<p>There's a slew of optional arguments you can give to this script. To use Bounce Handler via the command line, first change into the directory that Bounce Handler resides in, and issue the command:</p>
<pre>
 ./dada_bounce_handler.pl --help</pre>
<p>For a full list of paramaters.</p>
<p>You may set the cronjob via the command line interface, rather than the web-based way. You may run into file permission problems when running it this way, depending on your server setup.</p>
<p>
</p>
<h2><a name="command_line_interface_for_cronjobs_">Command Line Interface for Cronjobs:</a></h2>
<p>The secret is to actually have two commands in one. The first command changes into the same directory as the <code>dada_bounce_handler.pl</code> script, the second invokes the script with the paramaters you'd like.</p>
<p>For example:</p>
<pre>
 */5 * * * * cd /home/myaccount/cgi-bin/dada/plugins; /usr/bin/perl ./dada_bounce_handler.pl  &gt;/dev/null 2&gt;&amp;1</pre>
<p>Where, <em>/home/myaccount/cgi-bin/dada/plugins</em> is the full path to the directory the <code>dada_bounc_handler.pl</code> script resides.</p>
<p>
</p>
<hr />
<h1><a name="plugin_configs">Plugin Configs</a></h1>
<p>These plugin configs are located in your <code>.dada_config</code> file, as mentioned above.</p>
<p>
</p>
<h2><a name="server__username__password">Server, Username, Password</a></h2>
<p>These configs need to be set, to hook Bounce Handler to the email address you want the bounce messages to go.</p>
<p>
</p>
<h2><a name="port">Port</a></h2>
<p>Defaults to: <strong>110</strong> for regular connections, <code>995</code> for SSL connections.</p>
<p>Sets the <strong>port</strong> Bounce Handler uses connect to the POP server.</p>
<p>
</p>
<h2><a name="usessl">USESSL</a></h2>
<p>Defaults to: <strong>0</strong>. Set to, <strong>1</strong>, if you'd like (and can) connect to the POP server with an SSL connection.</p>
<p>
</p>
<h2><a name="auth_mode">AUTH_MODE</a></h2>
<p>Defaults to: <strong>BEST</strong></p>
<p>Allowed paramaters: <strong>BEST</strong>, <strong>PASS</strong>, <strong>APOP</strong>, <strong>CRAM-MD5</strong>.</p>
<p>If the default of, <strong>BEST</strong> isn't working, try the various allowed paramaters. <strong>PASS</strong> passes the POP3 password in cleartext.</p>
<ul>
<li><strong><a name="best" class="item">BEST</a></strong>

<p>Tries, <strong>APOP</strong>, <strong>CRAM-MD5</strong> and <strong>PASS</strong> modes, in that order of availability.</p>
</li>
</ul>
<p>
</p>
<h2><a name="plugin_name">Plugin_Name</a></h2>
<p>The name of this plugin.</p>
<p>Defaults to: <strong>Bounce Handler</strong></p>
<p>
</p>
<h2><a name="plugin_url">Plugin_URL</a></h2>
<p>The URL of the plugin. This is usually figured out by default, but if it's not (you'll know, as links are broken in the plugin and nothing seems to work) you may have to set this, manually.</p>
<p>
</p>
<h2><a name="allow_manual_run">Allow_Manual_Run</a></h2>
<p>Defaults to <strong>1</strong> (enabled)</p>
<p>Sets whether you may use the <strong>manual run URL</strong> to run Bounce Handler. The manual run URL is what the curl-powered cronjob uses. If you want to disable this method, set this config variable to, <strong>0</strong></p>
<p>
</p>
<h2><a name="manual_run_passcode">Manual_Run_Passcode</a></h2>
<p>This is covered above, under, <strong>passcode</strong></p>
<p>
</p>
<h2><a name="enable_pop3_file_locking">Enable_POP3_File_Locking</a></h2>
<p>Defaults to <strong>1</strong></p>
<p>When enabled, Bounce Handler will use a lock file to make sure only one connection to the POP server is done at one time. Disable this by setting this paramater to, <strong>0</strong>.</p>
<p>
</p>
<h2><a name="log">Log</a></h2>
<p>Sets the path to the logfile Bounce Handler creates. Defaults to:
 <code>bounces.txt</code> in your <code>.dada_files/.logs</code> directory.</p>
<p>
</p>
<h2><a name="messagesatonce">MessagesAtOnce</a></h2>
<p>Sets how many messages are checke, per running of the plugin.</p>
<p>Defaults to: <strong>100</strong></p>
<p>Since there could be many bounce messages awaiting to be checked, there is a limit that's set on how many mesages are looked at, at one time. This also means that it may take a few runnings of the plugin to clear all the awaiting messages.</p>
<p>
</p>
<h3><a name="max_size_of_any_message">Max_Size_Of_Any_Message</a></h3>
<p>Defaults to: <strong>2,621,440</strong> bytes (2.5 megs). Set in, <strong>octets</strong></p>
<p>Sets the maximum size of any bounced message that Bounce Handler will deal with. Anything larger than this will simply be ignored and deleted.</p>
<p>
</p>
<hr />
<h1><a name="more_on_scores__thresholds__etc">More on Scores, Thresholds, etc</a></h1>
<p>By default, Bounce Handler assigns a particular score to each email address that bounces back a message. These scores are tallied each time an email address bounces a message.</p>
<p>Since Dada Mail understands the differences between <strong>Hard Bounces</strong> and <strong>Soft Bounces</strong>, it'll append a smaller score for soft bounces, and a larger score for hard bounces. There's also a <strong>Decay Rate</strong>, an amount that all scores are decreased by, every time a mass mailing is sent out.</p>
<p>Once the email address's <strong>Bounce Score</strong> reaches the <strong>Threshold</strong>, the email address is then removed from the list.</p>
<p>
</p>
<hr />
<h1><a name="faqs">FAQs</a></h1>
<p>
</p>
<h2><a name="bounce_email_address">Bounce Email Address</a></h2>
<p>
</p>
<h3><a name="do_you_use_only_one_bounce_email_address_for_all_the_mailing_lists">Do you use only one Bounce Email Address  for all the mailing lists?</a></h3>
<p>Yes.</p>
<p>Even though there's only one Bounce Email Address, it is used by all the mailing lists of your Dada Mail, but Bounce Handler will work with every mailing list <em>individually</em>. Each mailing list also has a separate Bounce Scorecard.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 1999 - 2012 Justin Simoni 
<a href="http://justinsimoni.com">http://justinsimoni.com</a> 
All rights reserved.</p>
<p>This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</p>
<p>Parts of this script were swiped from Mail::Bounce::Qmail module, fetched from here:</p>
<p><a href="http://mikoto.sapporo.iij.ad.jp/cgi-bin/cvsweb.cgi/fmlsrc/fml/lib/Mail/Bounce/Qmail.pm">http://mikoto.sapporo.iij.ad.jp/cgi-bin/cvsweb.cgi/fmlsrc/fml/lib/Mail/Bounce/Qmail.pm</a></p>
<p>The copyright of that code stated:</p>
<p>Copyright (C) 2001,2002,2003 Ken'ichi Fukamachi
All rights reserved. This program is free software; you can
redistribute it and/or modify it under the same terms as Perl itself.</p>
<p>Thanks Ken'ichi</p>

</body>

</html>
